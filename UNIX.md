# UNIX 笔记

### 入门

- exit， ctrl -d
- passwd
- date
- who
  - -q 只显示用户名和用户总数
  - -H 显示用户信息及各列标题
- cal
- man查阅unix系统自带的手册
- shell 字符界面下，用户登录系统，有shell负责和用户交互
- ctrl -h 退格
- ctrl -u 删除输入行
- ctrl -c 终端程序
- /etc/passwd 存放用户相关信息
- ps 用来列出系统中当前运行那些进程
#### 登录
- init继承创建getty进程守候在各个终端上
- 终端有字符输入，执行login程序
- 验证成功之后fork一个shell进程
### vi编辑器入门
- 全屏字符界面编辑器
- 工作模式
	- 命令模式
	- 插入模式
	- 命令行模式
	- visual模式
- 启动/退出
	- 启动后进入命令模式
	- 命令行模式下 `:q!`退出
- vi模式切换
	- 默认进入命令模式
	- `：`进入命令行模式
	- 命令模式进入文本输入模式
		- i
		- l
		- a
		- A
		- o
		- O
- 输入返回到命令模式`ESC`
- 移动光标(命令模式下)
	- h,j,k,l
	
	- 0/^, $
	
	- w,b,e
	- [space]
	- [return]
	- [backspace]
- 文本修改（命令模式下
	- x 删除当前光标的字符
	- dd
	- u 撤销当前的修改
	- r 替换光标所在的字符
	- R 替换当前光标的字符同时进入输入模式
	- 5x
	- 3dd
	- . 继续向前的操作
- 搜索（命令模式下
	- /
	- ？
- help（命令行
	- :help x
	- :helpgrep
	- vimtutor
- 缓冲和显示
### unix文件系统介绍
##### 磁盘与文件

- 文件是操作系统对io设备的抽象，进程/线程是执行过程的抽象
- 文件： 文本，脚本， 程序； 目录文件；特殊文件
- 文件扩展名是为了提升可读性，并没有类型一说

#### 目录命令

- pwd

- cd

- mkdir

- rmdir

- ls 以及其参数

- 文件类型

  - -

  - d

  - c

  - b

  - l
- 文件权限：rwx
- 拥有者自己的权限，组权限，其他人的权限
- 文件操作
	- cat
	- touch
	- rm
		- rm -rf(递归+强制不提醒)
		- rm -i
### vi高级用法
- vi 启动选项
	- vi -R
	- :wq!
	- view
- 编辑多个文件
	- :tabnew + :e + :tabnext + :tabprevious + :q + :tabclose
- 寄存器
	- 双引号开头引用（命令模式
	- :register 显示寄存器
	- 寄存器
		- 有名寄存器
		- 编号寄存器
		- 缺省寄存器
- 剪切和粘贴
	- dd
	- yy
	- p
	- P
- Visual 模式
	- 命令模式下v进入
	- y命令拷贝到“”和"0寄存器中
- Motion 和 range
	- 移动光标的命令
	- 寄存器 + [range] + d/y + [motion]完成拷贝删除动作 --> 寄存器
	- 寄存器 + p 拷贝寄存器的内容到光标后的位置上
- 光标快速定位
	- :n
	- :$
	- 1G
	- G/0G
	- nG
	- ctrl -g
- 定制vi
	- :set all
	- :set
	- :set X
- shell
	- :shell 切换到shell， exit回到vim
	- :! 执行shell命令
	- :r! 命令，将shell命令输出粘贴到当前位置
- tips
	- ？？
### emacs编辑器 正则表达式
- vi的正则表达式搜索
	- 命令模式下/或？
- 替换
	- :s命令来替换字符串
	- :range s/from/to/flags
### 文件系统的高级操作
##### 重定向

- 

##### 管道

- shell将一个程序的标准输出作为另一个程序的via哦准输入，行成管道
- command A | command B

##### 文件操作

- cp 拷贝源文件成目标文件

  - -b
  - -i
  - -r

- mv移动文件

  - -b

  - -i

  - -f

- wc统计字数
	- -l
	- -w
	- -c
- head显示文件头部，缺省显示头部10行
	- -n
	- -c n
- tail显示文件尾部
- cut命令纵向输出文件的某个列
- paste命令横向连接两个文件
- more分页显示文件内内容，可以向后翻
- less向前翻

##### 文件系统原理

- unix三大抽象
  - 进程线程 =》 执行过程
  - 文件 =》 io
  - 地址 =》 内存
  
- 四种io
  - 文件系统，块设备，字符设备，socket
  - 块设备和字符设备出现在文件系统的名字空间
  - socket仅表现为文件
  
- 磁盘文件组织

  - 访问，修改，空间

- 磁盘的空间组织

  - 变长的堆，定长的记录，索引

- 文件系统的选择

  - key => value
  - 目录文件

  